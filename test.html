<!DOCTYPE html><html lang='ru'>
<head>
<meta charset='utf-8'>
<meta name='viewport' content='width=480'>
<title>HTTPS</title>

<style>
body{margin:0; background: #9ea7aa; color: #455a64; font-family: Helvetica;}
::selection {background: #a0bbbb;}
::-moz-selection {background: #a0bbbb;}
input, textarea, button, select, select:focus {outline: none;}

h1 {font-size: 30px; margin: -4px 0 0 0;}
h3 {width: 354px; margin: 0 4px 12px 0;}
h1, h3 {font-weight:normal;}

.ed {height: 36px; width: 72px; margin: -5px 0 0 0; }
.ed2 {height: 24px; width: 480px;}
.ed3 {width: 340px; resize: none; margin: 0 0 -5px 0;}
.ed, .ed2, .ed3 {background: #fdfdfe; color: #455a64; font-family: Helvetica; font-size: 18px; 
border: 1px solid gray; border-radius: 4px; padding: 6px; box-shadow: 0 3px 4px rgba(0,0,0,0.1) inset;}

#lay1 {width: 480px; padding: 0; margin: 12px auto;  border-radius: 4px;
box-shadow: 0 0 10px rgba(0,0,0,0.3); -moz-box-shadow: 0 0 10px rgba(0,0,0,0.3); -webkit-box-shadow: 0 0 10px rgba(0,0,0,0.3);
background: rgba(207,216,220,1); color: #455a64; font-family: Helvetica; font-size: 18px;}

.ram0 {width: 354px; margin: 0; overflow: hidden; padding: 14px 12px 0 12px; font-family: Helvetica; font-size: 15px;}
.lab1 {width: 100%; float: left; margin: 0 0 12px 0;}

</style>

<body>
<table id='lay1'>
<tr><td>
<div class='ram0'>
<p><div class='lab1'><h3>Ответ сервера: <a id='id_title'></a></h3></div></p>
<p><input type='submit' class='btn' onclick="GetHTTP('https://2conv.com/convert/1/aLrRTJVF5DM/?videoId=aLrRTJVF5DM&format=1&userStatus=&uniqVideoId=',1)" value='2conv.com'></p>
<p><input type='submit' class='btn' onclick="GetHTTP('https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=1&key=AIzaSyDPZL8ta-gNxEQoAz4EZ9yUPeEcfMBfRHE&q=IAMX+-+Think+Of+England',1)" value='YouTube'></p>
</div>
</td></tr>
</table>
</body>

<script type="text/javascript">

function GetHTTP(url,st) {
  var xhr = new XMLHttpRequest();
  xhr.open('GET',url,true); 
  xhr.send();
  xhr.onload = function() {
    if (this.responseText != '') {
      if (st==1) {
        var myObj = JSON.parse(this.responseText);
        id_title.innerHTML = myObj.items[0].id.videoId;

        //videoId = this.responseText;
        //id_title.innerHTML = this.responseText;
        //setTimeout(function(){GetHTTP('http://2conv.com/convert/1/'+videoId+'/?videoId='+videoId+'&format=1&userStatus=&uniqVideoId=',2);},3000);
      }
      if (st==2) {
        var myObj = JSON.parse(this.responseText);
        //uniqVideoId = myObj.uniqVideoId;
        id_title.innerHTML = 'uniqVideoId: ' + myObj.uniqVideoId;
        //setTimeout(function(){GetHTTP('http://2conv.com/convert/1/'+videoId+'/?videoId='+videoId+'&format=1&userStatus=&uniqVideoId='+uniqVideoId,3);},3000);    
      }
      if (st==3) {
        var myObj = JSON.parse(this.responseText);
        id_title.innerHTML = 'status: ' + myObj.status;
        //setTimeout(function(){GetHTTP('http://2conv.com/convert/1/'+videoId+'/?videoId='+videoId+'&format=1&userStatus=convert&uniqVideoId='+uniqVideoId,4);},3000);    
      }
      if (st==4) {
        var myObj = JSON.parse(this.responseText);
        id_title.innerHTML = 'downloadUrl: ' + myObj.status;
          //setTimeout(function(){GetHTTP('https://2conv.com/convert/1/'+videoId+'/?videoId='+videoId+'&format=1&userStatus=convert&uniqVideoId='+uniqVideoId,4);},1000);    
      }
    }
  }
  xhr.onerror = function(e) {
    alert("Error: " + e.target.status);
  }
  
}


</script>
</html>